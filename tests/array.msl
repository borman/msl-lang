fun not X
  return if X then false else true
end

fun qsort [A, L, R]
  I = L
  J = R
  X = $A ((L+R)/2)
  while not (I>J)
    while ($A I < X) I = I+1 end
    while ($A J > X) J = J-1 end
    if not (I > J) then
      [$A I, $A J] = [$A J, $A I]
      I = I+1
      J = J-1
    end
  end
  if J>L then do qsort [A, L, J] end
  if I<R then do qsort [A, I, R] end
end

fun main []
  N = 30
  Test = array N
  do println ["Sizeof Test is", size Test]

  T = 7
  for I from 1 to N
    $Test I = T
    T = (T*383) % 1543 + 1
  end

  for I from 1 to N
    do print $Test I  
  end
  do println []

  do qsort [Test, 1, N]

  for I from 1 to N
    do print $Test I  
  end
  do println []
end
